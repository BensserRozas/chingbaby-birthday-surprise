/* --- 全局樣式 --- */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');

body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #333;
    font-family: 'Noto Sans TC', sans-serif;
    overflow: hidden;
}

#game-container {
    position: relative;
    /* 使用 aspect-ratio 保持比例，並用 max-width/height 限制大小 */
    width: 100%;
    max-width: 1000px;
    aspect-ratio: 1000 / 600;
    background-color: #fff;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    overflow: hidden;
}

.scene {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    opacity: 0;
    visibility: hidden;
    transition: opacity 1s ease-in-out;
    background-size: cover;
    background-position: center;
    display: flex;
    justify-content: center;
    align-items: center;
}

.scene.active {
    opacity: 1;
    visibility: visible;
}

/* --- 讀取畫面 --- */
#loading-screen .content {
    text-align: center;
    color: #4a4a4a;
}
#loading-screen h1 {
    font-size: 2.8vw; /* 使用 vw 讓字體適應容器 */
    color: #4a4a4a;
    text-shadow: 2px 2px 4px rgba(255, 107, 157, 0.3);
}

.birthday-date {
    color: #ff6b9d;
    font-size: 0.8em;
    margin-left: 15px;
    animation: dateBounce 2s ease-in-out infinite;
    display: inline-block;
}

/* Happy Birthday 文字特效 */
#loading-screen p {
    font-size: 1.5vw;
    font-weight: bold;
    margin: 20px 0;
    animation: happyBirthdayGlow 3s ease-in-out infinite;
    text-shadow: 2px 2px 4px rgba(255, 107, 157, 0.3);
}

@keyframes happyBirthdayGlow {
    0%, 100% { 
        color: #ff6b9d;
        text-shadow: 2px 2px 4px rgba(255, 107, 157, 0.3);
        transform: scale(1);
    }
    25% { 
        color: #ff9800;
        text-shadow: 2px 2px 8px rgba(255, 152, 0, 0.5);
        transform: scale(1.05);
    }
    50% { 
        color: #4caf50;
        text-shadow: 2px 2px 8px rgba(76, 175, 80, 0.5);
        transform: scale(1.1);
    }
    75% { 
        color: #2196f3;
        text-shadow: 2px 2px 8px rgba(33, 150, 243, 0.5);
        transform: scale(1.05);
    }
}

@keyframes dateBounce {
    0%, 100% { transform: translateY(0px) scale(1); }
    25% { transform: translateY(-3px) scale(1.05); }
    50% { transform: translateY(-5px) scale(1.1); }
    75% { transform: translateY(-3px) scale(1.05); }
}
#start-button {
    padding: 1.2vh 2.5vw;
    font-size: 1.8vw;
    cursor: pointer;
    background-color: #ff8fab;
    color: white;
    border: none;
    border-radius: 5vh;
    font-weight: bold;
    transition: all 0.3s;
    box-shadow: 0 4px 8px rgba(255, 139, 171, 0.3);
    animation: buttonGlow 3s ease-in-out infinite;
}

@keyframes buttonGlow {
    0%, 100% { 
        box-shadow: 0 4px 8px rgba(255, 139, 171, 0.3);
    }
    25% { 
        box-shadow: 0 5px 12px rgba(255, 193, 7, 0.4);
    }
    50% { 
        box-shadow: 0 6px 15px rgba(255, 139, 171, 0.5);
    }
    75% { 
        box-shadow: 0 5px 12px rgba(76, 175, 80, 0.4);
    }
}
#start-button:hover {
    background-color: #ff6b81;
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 6px 12px rgba(255, 139, 171, 0.4);
    transition: all 0.3s ease;
}

/* --- 場景 1: 便利商店 --- */
#scene-1 {
    background-image: url('../images/convenience_store_1_1755282908508.png');
}

/* 寵物表情變化系統 */
#pet-expression {
    transition: all 0.5s ease;
    animation: petFloat 3s ease-in-out infinite;
}

/* 小蛋糕驚喜特效 */
#hidden-cake {
    transition: all 0.5s ease;
    box-shadow: 0 4px 12px rgba(255, 107, 157, 0.3);
}

#hidden-cake.visible {
    opacity: 1 !important;
    transform: scale(1) !important;
    animation: cakeFloat 4s ease-in-out infinite;
}

#hidden-cake:hover {
    transform: scale(1.1) !important;
    box-shadow: 0 6px 20px rgba(255, 107, 157, 0.5);
    filter: brightness(1.2);
}

@keyframes cakeFloat {
    0%, 100% { transform: scale(1) translateY(0px); }
    50% { transform: scale(1.05) translateY(-5px); }
}

/* 粒子特效系統 */
.sparkle {
    position: absolute;
    pointer-events: none;
    z-index: 100;
    font-size: 24px;
    animation: sparkleFloat 2s ease-out forwards;
    text-shadow: 0 0 10px currentColor;
}

@keyframes sparkleFloat {
    0% { 
        opacity: 0; 
        transform: translateY(0px) scale(0.5);
    }
    20% { 
        opacity: 1; 
        transform: translateY(-20px) scale(1.2);
    }
    80% { 
        opacity: 1; 
        transform: translateY(-40px) scale(1);
    }
    100% { 
        opacity: 0; 
        transform: translateY(-60px) scale(0.8);
    }
}

@keyframes petFloat {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-5px) rotate(2deg); }
}
#rabbit-worker {
    position: absolute;
    bottom: 8%; /* 往上移動，避免擋到字幕 */
    left: 50%; /* 置中 */
    transform: translateX(-50%); /* 真正置中 */
    height: 70%; /* 稍微縮小避免擋字幕 */
    transition: all 0.5s ease;
    animation: rabbitBreath 4s ease-in-out infinite;
}

@keyframes rabbitBreath {
    0%, 100% { transform: translateX(-50%) scale(1); }
    50% { transform: translateX(-50%) scale(1.02); }
}
.happy-object {
    position: absolute;
    cursor: pointer;
    transition: transform 0.3s, opacity 0.5s;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    animation: objectFloat 4s ease-in-out infinite;
}

.happy-object:nth-child(2) {
    animation-delay: 1s;
}

.happy-object:nth-child(3) {
    animation-delay: 2s;
}

@keyframes objectFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-3px); }
}

.happy-object:hover {
    transform: scale(1.2);
    box-shadow: 0 4px 12px rgba(255, 107, 157, 0.3);
    animation-play-state: paused;
}
#object-1 { bottom: 3.3%; left: 80%; width: 15%; } /* 再放大一倍 */
#object-2 { bottom: 25%; left: 12%; width: 10%; } /* 再放大一倍 */
#object-3 { bottom: 41.7%; left: 58%; width: 14%; transform: rotate(-15deg); } /* 再放大一倍 */
/* 兔子抱怨文字 */
#rabbit-complaint {
    position: absolute;
    top: 20%;
    left: 45%;
    background-color: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 8px 12px;
    border-radius: 15px;
    font-size: 16px;
    font-weight: bold;
    z-index: 15;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    max-width: 25%;
    transition: opacity 0.3s;
    border: 2px solid #ffd700;
    animation: complaintBounce 3s ease-in-out infinite;
}

@keyframes complaintBounce {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-2px); }
}
#rabbit-complaint.hide {
    opacity: 0;
    pointer-events: none;
}
/* 貓福珊迪圖片 */
#mofusand-cat { 
    position: absolute; 
    top: 42.5%; 
    left: 24%; 
    width: 10%; 
    height: 17%; 
    cursor: pointer;
    opacity: 0;
    transition: all 0.8s ease;
    transform: scale(0.8);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
}
#mofusand-cat.visible {
    opacity: 1;
    transform: scale(1);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
    animation: mofusandFloat 3s ease-in-out infinite;
}

@keyframes mofusandFloat {
    0%, 100% { transform: scale(1) translateY(0px); }
    50% { transform: scale(1) translateY(-3px); }
}
/* 貓福珊迪提示文字 */
#mofusand-hint {
    position: absolute;
    top: 36%;
    left: 15%;
    background-color: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 8px 12px;
    border-radius: 15px;
    font-size: 1.2vw;
    font-weight: bold;
    opacity: 0;
    transition: opacity 0.5s;
    z-index: 20;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    border: 2px solid #ffd700;
}
#mofusand-hint.visible {
    opacity: 1;
    transform: scale(1.05);
    transition: opacity 0.5s, transform 0.3s;
}

/* 熊貓提示文字 */
#panda-hint {
    position: absolute;
    top: 40%;
    right: 20%;
    background-color: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 8px 12px;
    border-radius: 15px;
    font-size: 1.2vw;
    font-weight: bold;
    opacity: 0;
    transition: opacity 0.5s;
    z-index: 20;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    border: 2px solid #ffd700;
}
#panda-hint.visible {
    opacity: 1;
    transform: scale(1.05);
    transition: opacity 0.5s, transform 0.3s;
}

/* 蛋糕提示文字 */
#cake-hint {
    position: absolute;
    top: 15%;
    left: 15%;
    background-color: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 8px 12px;
    border-radius: 15px;
    font-size: 1.2vw;
    font-weight: bold;
    opacity: 0;
    transition: opacity 0.5s;
    z-index: 20;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    border: 2px solid #ffd700;
}
#cake-hint.visible {
    opacity: 1;
    transform: scale(1.05);
    transition: opacity 0.5s, transform 0.3s;
}

/* 禮物袋圖片 */
#gift-bag {
    position: absolute;
    bottom: 15%;
    right: 43.5%;
    width: 12%;
    cursor: pointer;
    transition: all 0.3s ease;
    opacity: 0;
    z-index: 16;
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
}
#gift-bag.visible {
    opacity: 1;
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
}
#gift-bag:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.7);
}

/* 禮物袋提示文字 */
#gift-bag-hint {
    position: absolute;
    bottom: 35%;
    right: 45%;
    background-color: rgba(255, 255, 255, 0.9);
    color: #333;
    padding: 8px 12px;
    border-radius: 15px;
    font-size: 1.2vw;
    font-weight: bold;
    opacity: 0;
    border: 2px solid #ffd700;
    transition: opacity 0.5s;
    z-index: 20;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}
#gift-bag-hint.visible {
    opacity: 1;
}

/* --- 通用 UI 元素 --- */
.dialogue-box {
    position: absolute;
    bottom: 3.3%;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(255, 107, 157, 0.9);
    color: white;
    padding: 2.5% 4%;
    border-radius: 2.5vh;
    font-size: 1.8vw;
    text-align: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s, visibility 0.5s;
    max-width: 80%;
    z-index: 100;
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
}
.dialogue-box.visible {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) scale(1.02);
    transition: opacity 0.5s, visibility 0.5s, transform 0.3s;
    animation: dialoguePop 0.6s ease-out;
}

@keyframes dialoguePop {
    0% { 
        transform: translateX(-50%) scale(0.95); 
        opacity: 0;
    }
    50% { 
        transform: translateX(-50%) scale(1.05); 
        opacity: 0.8;
    }
    100% { 
        transform: translateX(-50%) scale(1.02); 
        opacity: 1;
    }
}
.task-prompt {
    position: absolute;
    top: 3.3%;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(255, 255, 255, 0.9);
    padding: 1.6% 3.3%;
    border-radius: 3.3vh;
    font-weight: bold;
    color: #333;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    font-size: 1.6vw;
    border: 2px solid #ffd700;
}

/* --- 場景 2: 驚喜 --- */
#scene-2 {
    background-image: url('../images/convenience_store_2_1755282908508.png');
}
#rabbit-surprised {
    position: absolute;
    bottom: 8%; /* 往上移動 */
    left: 10%; /* 更靠左邊，避免與熊貓重疊 */
    height: 50%; /* 調整高度保持一致 */
}
#panda-hero {
    position: absolute;
    bottom: -100%; /* 從下方滑入 */
    right: 10%; /* 更靠右邊，避免與兔子重疊 */
    height: 50%; /* 與rabbit_cute一致的高度 */
    cursor: pointer;
    transition: all 1.5s cubic-bezier(0.25, 1, 0.5, 1);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}
#panda-hero.arrived {
    bottom: 8%; /* 往上移動，不貼底部 */
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
}

/* --- 禮物彈窗 --- */
.modal {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0; visibility: hidden; transition: opacity 0.5s;
    z-index: 200;
}
.modal.visible {
    opacity: 1; visibility: visible;
}
.modal-content {
    position: relative;
    text-align: center;
    width: 70%;
}
#gift-photo {
    width: 100%;
    border-radius: 2.5vh;
    box-shadow: 0 0 30px rgba(255,255,255,0.5);
}
#gift-dialogue {
    position: absolute;
    bottom: -10vh;
    left: 50%;
    transform: translateX(-50%);
    color: white;
    font-size: 2.2vw;
    font-weight: bold;
    width: 100%;
    text-shadow: 0 0 5px black;
}

/* --- 場景 3: 回憶 --- */
#scene-3 { background-color: #DFDCE3; }
.memory-page {
    width: 100%; height: 100%;
    background-size: cover;
    background-position: center;
    position: absolute;
    opacity: 0; visibility: hidden; transition: opacity 1s;
}
.memory-page.active { opacity: 1; visibility: visible; }
#memory-green-island { background-image: url('../images/green_island_1755282908508.jpg'); }
#memory-img1 { background-image: url('../images/IMG_1.png'); }

/* 影片樣式 */
#memory-img2 video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1;
}

#memory-img3 { background-image: url('../images/IMG_3.png'); }
#memory-img4 { background-image: url('../images/IMG_4.png'); }
#memory-img5 { background-image: url('../images/IMG_5.png'); }
#memory-img6 { background-image: url('../images/IMG_6.png'); }
#memory-yilan { background-image: url('../images/yilan_1755282908505.jpg'); }
#memory-img7 { background-image: url('../images/IMG_7.jpg'); }
.memory-caption {
    position: absolute;
    top: 10%; /* 移到上方位置 */
    left: 50%;
    transform: translateX(-50%);
    font-size: 3.6vw;
    font-weight: bold;
    color: white;
    background-color: rgba(0,0,0,0.5);
    padding: 1.6% 5%;
    border-radius: 2.5vh;
    z-index: 5; /* 確保標題在影片上方 */
}
.nav-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 6vw;
    color: rgba(255,255,255,0.8);
    cursor: pointer;
    z-index: 10;
    padding: 0 2%;
    user-select: none;
}
.nav-arrow:hover { color: white; }
#next-memory { right: 0; }
#prev-memory { left: 0; }

/* --- 場景 4: 生日慶典 --- */
#scene-4 { background-image: url('../images/night_beach_1755282908508.jpg'); }
#final-characters {
    position: absolute;
    bottom: 5%; /* 靠右下角，不蓋到文字 */
    right: 5%; /* 改為靠右定位 */
    height: 35%; /* 縮小一些 */
}
#birthday-cake {
    position: absolute;
    bottom: 20%; /* 調整位置 */
    left: 25%; /* 置中靠左，在左半部 */
    transform: translateX(-50%);
    width: 30%; /* 再放大一倍左右 */
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
}
#birthday-cake:hover { 
    transform: translateX(-50%) scale(1.1); 
    box-shadow: 0 6px 20px rgba(255, 107, 157, 0.5);
}
.birthday-message {
    position: absolute;
    top: 50%;
    right: 5%; /* 改為靠右定位 */
    transform: translateY(-50%); /* 只垂直置中 */
    text-align: center;
    width: 40%; /* 縮小寬度，在右半部 */
}
.birthday-message p {
    font-size: 2.8vw;
    color: white;
    font-weight: bold;
    text-shadow: 0 0 10px rgba(0,0,0,0.8);
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 1s, transform 1s;
}
#final-button {
    padding: 1.2vh 2.5vw;
    font-size: 1.8vw;
    cursor: pointer;
    background-color: #ff8fab;
    color: white;
    border: none;
    border-radius: 5vh;
    font-weight: bold;
    margin-top: 3.3%;
    opacity: 0;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(255, 139, 171, 0.3);
}

#final-button:hover {
    background-color: #ff6b81;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 139, 171, 0.5);
}

/* 煙火效果 */
.firework {
    position: absolute;
    width: 0.4%;
    height: 0.4%;
    background: #fff;
    border-radius: 50%;
    opacity: 1;
    animation: burst 1s ease-out forwards;
}
@keyframes burst {
    to {
        transform: scale(25);
        opacity: 0;
    }
}





/* 處理圖片無法載入 */
img {
    background-color: #eee;
    color: #888;
    text-align: center;
    font-size: 12px;
}
